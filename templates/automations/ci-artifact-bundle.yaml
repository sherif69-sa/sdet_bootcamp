metadata:
  id: ci-artifact-bundle
  title: CI Artifact Bundle
  version: 1.0.0
  description: Collect automation outputs and create deterministic artifact bundle.
inputs:
  source_dir:
    default: ${{run.output_dir}}
    description: Directory to bundle.
workflow:
  - id: write-manifest
    action: fs.write
    with:
      path: ${{run.output_dir}}/manifest.txt
      content: 'Generated by CI artifact bundle template.\n'
  - id: bundle
    action: artifacts.bundle
    with:
      source_dir: ${{run.output_dir}}
      output: ${{run.output_dir}}/artifacts.tar
