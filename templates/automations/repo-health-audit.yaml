metadata:
  id: repo-health-audit
  title: Repository Health Audit
  version: 1.0.0
  description: Run repo audit and emit JSON and SARIF artifacts for CI and governance.
inputs:
  profile:
    default: strict
    description: Audit profile to use.
  changed_only:
    default: false
    description: Restrict scan to changed files.
workflow:
  - id: repo-audit
    action: repo.audit
    with:
      profile: ${{inputs.profile}}
      changed_only: ${{inputs.changed_only}}
      output_json: ${{run.output_dir}}/repo-audit.json
      output_sarif: ${{run.output_dir}}/repo-audit.sarif.json
